<div class="container-relatorio">
  <!-- Cabeçalho -->
  <div class="header-relatorio">
    <h2>Relatório de Contas a Pagar por Filial</h2>
  </div>

  <!-- Filtros -->
  <div class="filtros">
    <label for="filial">Selecione a filial:</label>
    <select id="filial" [(ngModel)]="filialSelecionada">
      <option [ngValue]="null">-- Escolha uma filial --</option>
      <option *ngFor="let f of filiais" [value]="f.id">
        {{ f.nome }} - {{ f.identificacao }}
      </option>
    </select>

    <button class="btn" (click)="gerarRelatorio()" [disabled]="!filialSelecionada || carregando">
      {{ carregando ? 'Gerando...' : 'Gerar Relatório' }}
    </button>

    <button type="button" class="btn-relatorio" (click)="gerarRelatorioPDF()" [disabled]="!filialSelecionada">
      <i class="fa-regular fa-file-pdf"></i> PDF
    </button>
  </div>

  <!-- Relatório -->
  <div *ngIf="relatorio && relatorio.meses?.length > 0" class="tabela-container">
    <div *ngFor="let mes of relatorio.meses" class="bloco-mes">
      <h3 class="titulo-mes">
        {{ mes.mesAno | titlecase }}
      </h3>

      <table class="tabela-relatorio">
        <thead>
          <tr>
            <th>Fornecedor</th>
            <th>Valor</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let fornecedor of mes.fornecedores">
            <td>{{ fornecedor.fornecedor }}</td>
            <td>{{ fornecedor.valor | currency:'BRL':'symbol':'1.2-2' }}</td>
          </tr>
        </tbody>
      </table>

      <div class="subtotal">
        Subtotal: <strong>{{ mes.subtotal | currency:'BRL':'symbol':'1.2-2' }}</strong>
      </div>
    </div>

    <div class="total-geral">
      Total Geral: <strong>{{ relatorio.totalGeral | currency:'BRL':'symbol':'1.2-2' }}</strong>
    </div>
  </div>

  <!-- Caso sem dados -->
  <div *ngIf="relatorio && (!relatorio.meses || relatorio.meses.length === 0)" class="sem-dados">
    <p>Nenhum dado encontrado para esta filial.</p>
  </div>
</div>
